/* =====================================================
   PM ITINERARY — WATER / MARINE (PM-tight / uniforme)
   - Card più compatte, meno vuoti
   - KPI in 1 riga (4 pill)
   - Dettagli: pannello diverso (più chiaro + cornice acqua)
   - Animazioni leggere e sobrie
   ===================================================== */

/* =========================
   0) ROOT (PALETTE + TYPO)
   ========================= */
#pm-it{
  --pm-primary:#041b2e71;
  --pm-accent:#0fa3b1;
  --pm-accent2:#39c6d2;

  --pm-text:#ffffff;
  --pm-muted:rgba(255,255,255,.78);

  --pm-line:rgba(255,255,255,.16);
  --pm-line2:rgba(15,163,177,.22);

  --pm-ok:#1ea97c;
  --pm-warn:#f2b84b;

  /* misure (più tight) */
  --pm-r: 10px;
  --pm-r2: 8px;
  --pm-pad: 12px;      /* ↓ */
  --pm-gap: 10px;

  --pm-shadow: 0 8px 22px rgba(4,27,46,.10);

  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height: 1.3;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  width: 98%;
  margin: auto;
  color: var(--pm-text);
  z-index: 4;
  position: relative;
}
#pm-it *{ box-sizing:border-box; }

/* =========================
   0.1) KEYFRAMES (micro-float)
   ========================= */
@keyframes pm-float-soft{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-3px); }
}
@keyframes pm-sheen{
  0%{ transform: translateX(-60%) skewX(-18deg); opacity:0; }
  18%{ opacity:.35; }
  100%{ transform: translateX(160%) skewX(-18deg); opacity:0; }
}

/* =========================
   1) WRAPPER (CONTAINER)
   ========================= */
#pm-it .pm-it-wrap{
  background: var(--pm-primary);
  border: 1px solid var(--pm-line);
  border-radius: var(--pm-r);
  box-shadow: var(--pm-shadow);
  backdrop-filter: blur(6px);
  overflow: hidden;
}

/* =========================
   2) HEADER
   ========================= */
#pm-it .pm-it-head{
  padding: var(--pm-pad);
  border-bottom: 1px solid rgba(255,255,255,.14);
}

/* NB: nel tuo HTML usi .pm-it-title (non .pm-it-h1) */
#pm-it .pm-it-title,
#pm-it .pm-it-h1{
  margin: 0;
  text-align: start;
  font-size: clamp(1.12rem, 2.1vw, 1.45rem);
  font-weight: 950;
  letter-spacing: -0.02em;
  line-height: 1.15;
  color: #fff;
}

#pm-it .pm-it-sub{
  margin: 6px 0 0; /* ↓ */
  color: rgba(255,255,255,.78);
  font-weight: 650;
  font-size: .92rem;
  line-height: 1.42;
  max-width: 72ch;
  text-align: start;
}

/* =========================
   3) TOOLBAR (FILTRI) — più compatta
   ========================= */
#pm-it .pm-it-toolbar{
  padding: var(--pm-pad);
  display:grid;
  grid-template-columns: 1.6fr .9fr .9fr 1.0fr;
  gap: 10px; /* ↓ */
  align-items:end;
  border-bottom: 1px solid rgba(255,255,255,.14);
}

#pm-it .pm-it-lbl{
  display:block;
  margin: 0 0 6px;
  color: rgba(255,255,255,.78);
  font-weight: 850;
  font-size: .80rem; /* ↓ */
  text-align: start;
  letter-spacing: .01em;
}

#pm-it .pm-it-in{
  width: 100%;
  padding: 10px 11px; /* ↓ */
  border-radius: var(--pm-r2);
  border: 1px solid rgba(255,255,255,.20);
  background: linear-gradient(180deg, #0fa3b165, #39c5d250);
  color: #ffffff;
  outline:none;
  font-weight: 800;
}
#pm-it .pm-it-in option{ background-color: #0c4c52bd; }
#pm-it .pm-it-in::placeholder{ color: rgba(255,255,255,.82); }
#pm-it .pm-it-in:focus{
  border-color: rgba(255,255,255,.36);
  box-shadow: 0 0 0 4px rgba(15,163,177,.16);
}

/* hint pill (più piccolo) */
#pm-it .pm-it-hint{
  height: 40px; /* ↓ */
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.82);
  font-weight: 850;
  font-size: .84rem;
  white-space:nowrap;
}
#pm-it .pm-it-hint i{ color: var(--pm-accent2); }

/* =========================
   4) GRID
   ========================= */
#pm-it .pm-it-body{ padding: var(--pm-pad); }

#pm-it .pm-it-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px; /* ↓ */
}

/* =========================
   5) CARD (più compatta / uniforme)
   ========================= */
#pm-it .it-card{
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 10px;
  background: rgba(255,255,255,.06);
  box-shadow: 0 8px 18px rgba(4,27,46,.10); /* più soft */
  overflow:hidden;
  position: relative;

  /* micro hover (desktop) */
  transition: transform .14s ease, border-color .14s ease, background .14s ease;
}
@media (hover:hover){
  #pm-it .it-card:hover{
    transform: translateY(-2px);
    border-color: rgba(15,163,177,.30);
    background: rgba(255,255,255,.07);
  }
}

/* media più bassa */
#pm-it .it-media{
  height: 108px; /* ↓ */
  position: relative;
  overflow:hidden;
  background:
    radial-gradient(circle at 22% 28%, rgba(57,198,210,.45), transparent 55%),
    radial-gradient(circle at 82% 40%, rgba(15,163,177,.35), transparent 55%),
    linear-gradient(135deg, rgba(4,27,46,.92), rgba(4,27,46,.55));
  border-bottom: 1px solid rgba(255,255,255,.14);
}

/* sheen meno invadente */
#pm-it .it-media::after{
  content:"";
  position:absolute;
  top:-45%;
  left:-70%;
  width: 70%;
  height: 210%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  animation: pm-sheen 5.2s ease-in-out infinite;
  pointer-events:none;
}

/* tagline più piccola */
#pm-it .it-tagline{
  position:absolute;
  left: 10px;
  bottom: 10px;
  padding: 6px 9px; /* ↓ */
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.92);
  font-weight: 850;
  font-size: .82rem; /* ↓ */
  backdrop-filter: blur(6px);
  animation: pm-float-soft 5.0s ease-in-out infinite;
}

#pm-it .it-body{ padding: 12px; } /* tight */

/* title row */
#pm-it .it-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 10px;
}

#pm-it .it-title{
  margin: 0;
  font-weight: 950;
  letter-spacing: -0.01em;
  color: #fff;
  font-size: 1.0rem; /* uniform */
  line-height: 1.2;
}

/* badges (più piccole) */
#pm-it .it-badges{
  display:flex;
  flex-wrap:wrap;
  gap: 6px; /* ↓ */
  justify-content:flex-end;
}
#pm-it .it-badge{
  display:inline-flex;
  align-items:center;
  gap: 6px;
  padding: 6px 9px; /* ↓ */
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.82);
  font-weight: 850;
  font-size: .78rem; /* ↓ */
}
#pm-it .it-badge.ok{ border-color: rgba(30,169,124,.40); background: rgba(30,169,124,.12); }
#pm-it .it-badge.warn{ border-color: rgba(242,184,75,.40); background: rgba(242,184,75,.12); }
#pm-it .it-badge.risk{ border-color: rgba(255,92,92,.40); background: rgba(255,92,92,.12); }

/* descrizione più stretta */
#pm-it .it-desc{
  margin: 8px 0 0;
  color: rgba(255,255,255,.78);
  font-weight: 650;
  font-size: .90rem;
  line-height: 1.38;
}

/* divider più compatto */
#pm-it .it-divider{
  margin: 10px 0; /* ↓ */
  height: 1px;
  background: rgba(255,255,255,.14);
}

/* =========================
   5.1) KPI META — 4 pill in riga
   ========================= */
#pm-it .it-meta{
  display:grid;
  grid-template-columns: repeat(4, minmax(0, 1fr)); /* ✅ */
  gap: 8px;
  margin-top: 8px;
}

#pm-it .it-pill{
  padding: 9px 9px; /* ↓ */
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: #fff;
  font-weight: 950;
  font-size: .90rem;
  line-height: 1.05;
  text-align: left;
  min-height: 46px; /* uniform */
  display:flex;
  flex-direction:column;
  justify-content:center;
}
#pm-it .it-pill span{
  display:block;
  margin-top: 4px;
  color: rgba(255,255,255,.72);
  font-weight: 650;
  font-size: .78rem; /* ↓ */
  line-height: 1.15;
}

/* =========================
   5.2) ACTIONS — più basse e uniformi
   ========================= */
#pm-it .it-actions{
  margin-top: 10px; /* ↓ */
  display:flex;
  gap: 10px;
}
#pm-it .pm-it-btn{
  flex:1;
  padding: 10px 12px; /* ↓ */
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: #fff;
  font-weight: 950;
  font-size: .92rem;
  letter-spacing: -0.01em;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 9px;
  transition: transform .12s ease, filter .12s ease, background .12s ease;
}
#pm-it .pm-it-btn:active{ transform: translateY(1px); }
#pm-it .pm-it-btn:disabled{ opacity:.55; cursor:not-allowed; }

#pm-it .pm-it-main{
  background: linear-gradient(90deg, var(--pm-accent), var(--pm-accent2));
  border-color: transparent;
  color:#fff;
}
@media (hover:hover){
  #pm-it .pm-it-main:hover{ filter: brightness(1.05); }
}

/* =========================
   6) DETAILS — pannello diverso dalla card
   (più chiaro + cornice acqua + inset)
   ========================= */
#pm-it .it-details{
  display:none;
  padding: 12px; /* tight */
  border-top: 1px solid rgba(255,255,255,.12);

  /* ✅ differenziazione netta */
  background:
    radial-gradient(circle at 18% 0%, rgba(57,198,210,.16), transparent 55%),
    radial-gradient(circle at 92% 12%, rgba(15,163,177,.12), transparent 60%),
    rgba(0,0,0,.16);
  position: relative;
}

/* cornice acqua */
#pm-it .it-details::before{
  content:"";
  position:absolute;
  inset: 0;
  border-top: 1px solid rgba(15,163,177,.35);
  box-shadow: inset 0 0 0 1px rgba(57,198,210,.14);
  pointer-events:none;
}

/* notch (micro) */
#pm-it .it-details::after{
  content:"";
  position:absolute;
  top: 0;
  left: 12px;
  width: 54px;
  height: 3px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--pm-accent), var(--pm-accent2));
  opacity: .85;
  pointer-events:none;
}

#pm-it .it-card.is-open .it-details{ display:block; }

/* titoli blocco più stretti */
#pm-it .it-blockTitle{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 0 8px; /* ↓ */
  border-top: 1px solid rgba(255,255,255,.14);
}
#pm-it .it-blockTitle:first-child{ border-top: none; padding-top: 0; }

#pm-it .it-blockTitle b{
  font-weight: 950;
  font-size: .98rem; /* leggermente più piccolo */
  letter-spacing: -0.01em;
  color: #fff;
}
#pm-it .it-blockTitle small{
  color: rgba(255,255,255,.70);
  font-weight: 650;
  font-size: .84rem;
}

/* box dentro details: più "panel" */
#pm-it .it-box{
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  overflow:hidden;
  background: rgba(255,255,255,.05);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

/* righe più compatte */
#pm-it .it-row{
  padding: 10px 11px; /* ↓ */
  display:flex;
  justify-content:space-between;
  gap: 10px;
  border-top: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.78);
  font-weight: 700;
  font-size: .88rem; /* ↓ */
}
#pm-it .it-row:first-child{ border-top:none; }
#pm-it .it-row b{
  color:#fff;
  font-weight: 950;
  display:inline-flex;
  align-items:center;
  gap: 8px;
}
#pm-it .it-row .it-note{
  color: rgba(255,255,255,.74);
  font-weight: 650;
  text-align: right;
}

/* timeline tappe più compatta */
#pm-it .it-timeline{
  list-style:none;
  margin:0;
  padding:0;
}
#pm-it .it-timeline li{
  padding: 10px 11px; /* ↓ */
  border-top: 1px solid rgba(255,255,255,.12);
}
#pm-it .it-timeline li:first-child{ border-top:none; }

#pm-it .it-time{ font-weight: 950; color:#fff; }
#pm-it .it-place{ font-weight: 850; color: rgba(255,255,255,.88); }
#pm-it .it-line{
  margin-top: 5px;
  color: rgba(255,255,255,.74);
  font-weight: 650;
  font-size: .88rem;
  line-height: 1.32;
}

/* chips più compatte */
#pm-it .it-chips{
  margin-top: 8px;
  display:flex;
  flex-wrap:wrap;
  gap: 7px;
}
#pm-it .it-chip{
  display:inline-flex;
  align-items:center;
  gap: 7px;
  padding: 6px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.82);
  font-weight: 800;
  font-size: .78rem;
}
#pm-it .it-chip i{ color: var(--pm-accent2); }

/* =========================
   7) FOOT NOTE — tight
   ========================= */
#pm-it .pm-it-foot{
  padding: 10px var(--pm-pad);
  border-top: 1px solid rgba(255,255,255,.14);
}
#pm-it .pm-it-footNote{
  color: rgba(255,255,255,.74);
  font-weight: 650;
  font-size: .88rem;
  line-height: 1.4;
}

/* =========================
   8) RESPONSIVE
   ========================= */
@media (max-width: 980px){
  #pm-it .pm-it-toolbar{ grid-template-columns: 1fr 1fr; }
  #pm-it .pm-it-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  #pm-it .it-meta{ grid-template-columns: repeat(2, minmax(0,1fr)); } /* su tablet 2x2 */
}
@media (max-width: 640px){
  #pm-it .pm-it-grid{ grid-template-columns: 1fr; }
  #pm-it .it-meta{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}