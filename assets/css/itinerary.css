/* =====================================================
   PM ITINERARY — WATER / MARINE (PM-tight / uniforme + PRO DETAILS)
   - Card più compatte, meno vuoti
   - KPI in 1 riga (4 pill)
   - Dettagli: pannello diverso (più chiaro + cornice acqua)
   - Dettagli PRO: roadmap tappe + callout vento/consigli/rischi con icone
   - Animazioni leggere e sobrie
   ===================================================== */

/* =========================
   0) ROOT (PALETTE + TYPO)
   ========================= */
#pm-it{
  --pm-primary:#041b2e71;
  --pm-accent:#0fa3b1;
  --pm-accent2:#39c6d2;

  --pm-text:#ffffff;
  --pm-muted:rgba(255,255,255,.78);

  --pm-line:rgba(255,255,255,.16);
  --pm-line2:rgba(15,163,177,.22);

  --pm-ok:#1ea97c;
  --pm-warn:#f2b84b;

  /* misure (più tight) */
  --pm-r: 10px;
  --pm-r2: 8px;
  --pm-pad: 12px;
  --pm-gap: 10px;

  --pm-shadow: 0 8px 22px rgba(4,27,46,.10);

  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
  line-height: 1.3;
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;

  width: 98%;
  margin: auto;
  color: var(--pm-text);
  z-index: 4;
  position: relative;
}
#pm-it *{ box-sizing:border-box; }

/* =========================
   0.1) KEYFRAMES (micro-float / sheen)
   ========================= */
@keyframes pm-float-soft{
  0%,100%{ transform: translateY(0); }
  50%{ transform: translateY(-3px); }
}
@keyframes pm-sheen{
  0%{ transform: translateX(-60%) skewX(-18deg); opacity:0; }
  18%{ opacity:.35; }
  100%{ transform: translateX(160%) skewX(-18deg); opacity:0; }
}

/* =========================
   1) WRAPPER (CONTAINER)
   ========================= */
#pm-it .pm-it-wrap{
  background: var(--pm-primary);
  border: 1px solid var(--pm-line);
  border-radius: var(--pm-r);
  box-shadow: var(--pm-shadow);
  backdrop-filter: blur(6px);
  overflow: hidden;
}

/* =========================
   2) HEADER
   ========================= */
#pm-it .pm-it-head{
  padding: var(--pm-pad);
  border-bottom: 1px solid rgba(255,255,255,.14);
}

/* NB: nel tuo HTML usi .pm-it-title */
#pm-it .pm-it-title,
#pm-it .pm-it-h1{
  margin: 0;
  text-align: start;
  font-size: clamp(1.12rem, 2.1vw, 1.45rem);
  font-weight: 950;
  letter-spacing: -0.02em;
  line-height: 1.15;
  color: #fff;
}
#pm-it .pm-it-sub{
  margin: 6px 0 0;
  color: rgba(255,255,255,.78);
  font-weight: 650;
  font-size: .92rem;
  line-height: 1.42;
  max-width: 72ch;
  text-align: start;
}

/* =========================
   3) TOOLBAR (FILTRI) — compatta
   ========================= */
#pm-it .pm-it-toolbar{
  padding: var(--pm-pad);
  display:grid;
  grid-template-columns: 1.6fr .9fr .9fr 1.0fr;
  gap: 10px;
  align-items:end;
  border-bottom: 1px solid rgba(255,255,255,.14);
}
#pm-it .pm-it-lbl{
  display:block;
  margin: 0 0 6px;
  color: rgba(255,255,255,.78);
  font-weight: 850;
  font-size: .80rem;
  text-align: start;
  letter-spacing: .01em;
}
#pm-it .pm-it-in{
  width: 100%;
  padding: 10px 11px;
  border-radius: var(--pm-r2);
  border: 1px solid rgba(255,255,255,.20);
  background: linear-gradient(180deg, #0fa3b165, #39c5d250);
  color: #ffffff;
  outline:none;
  font-weight: 800;
}
#pm-it .pm-it-in option{ background-color: #0c4c52bd; }
#pm-it .pm-it-in::placeholder{ color: rgba(255,255,255,.82); }
#pm-it .pm-it-in:focus{
  border-color: rgba(255,255,255,.36);
  box-shadow: 0 0 0 4px rgba(15,163,177,.16);
}

/* hint pill */
#pm-it .pm-it-hint{
  height: 40px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.82);
  font-weight: 850;
  font-size: .84rem;
  white-space:nowrap;
}
#pm-it .pm-it-hint i{ color: var(--pm-accent2); }

/* =========================
   4) GRID
   ========================= */
#pm-it .pm-it-body{ padding: var(--pm-pad); }

#pm-it .pm-it-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}

/* =========================
   5) CARD (compatta / uniforme)
   ========================= */
#pm-it .it-card{
  border: 1px solid rgba(255,255,255,.16);
  border-radius: 10px;
  background: rgba(255,255,255,.06);
  box-shadow: 0 8px 18px rgba(4,27,46,.10);
  overflow:hidden;
  position: relative;
  margin-top: 33px;
  transition: transform .14s ease, border-color .14s ease, background .14s ease;
}
@media (hover:hover){
  #pm-it .it-card:hover{
    transform: translateY(-2px);
    border-color: rgba(15,163,177,.30);
    background: rgba(255,255,255,.07);
  }
}

/* media */
#pm-it .it-media{
  height: 108px;
  position: relative;
  overflow:hidden;
  background:
    radial-gradient(circle at 22% 28%, rgba(57,198,210,.45), transparent 55%),
    radial-gradient(circle at 82% 40%, rgba(15,163,177,.35), transparent 55%),
    linear-gradient(135deg, rgba(4,27,46,.92), rgba(4,27,46,.55));
  border-bottom: 1px solid rgba(255,255,255,.14);
}
#pm-it .it-media::after{
  content:"";
  position:absolute;
  top:-45%;
  left:-70%;
  width: 70%;
  height: 210%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
  animation: pm-sheen 5.2s ease-in-out infinite;
  pointer-events:none;
}

/* tagline */
#pm-it .it-tagline{
  position:absolute;
  left: 10px;
  bottom: 10px;
  padding: 6px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.92);
  font-weight: 850;
  font-size: .82rem;
  backdrop-filter: blur(6px);
  animation: pm-float-soft 5.0s ease-in-out infinite;
}

#pm-it .it-body{ padding: 12px; }

/* top row */
#pm-it .it-top{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap: 10px;
}
#pm-it .it-title{
  margin: 0;
  font-weight: 950;
  letter-spacing: -0.01em;
  color: #fff;
  font-size: 1.0rem;
  line-height: 1.2;
}

/* badges */
#pm-it .it-badges{
  display:flex;
  flex-wrap:wrap;
  gap: 6px;
  justify-content:flex-end;
}
#pm-it .it-badge{
  display:inline-flex;
  align-items:center;
  gap: 6px;
  padding: 6px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: rgba(255,255,255,.82);
  font-weight: 850;
  font-size: .78rem;
}
#pm-it .it-badge.ok{ border-color: rgba(30,169,124,.40); background: rgba(30,169,124,.12); }
#pm-it .it-badge.warn{ border-color: rgba(242,184,75,.40); background: rgba(242,184,75,.12); }
#pm-it .it-badge.risk{ border-color: rgba(255,92,92,.40); background: rgba(255,92,92,.12); }

/* description */
#pm-it .it-desc{
  margin: 8px 0 0;
  color: rgba(255,255,255,.78);
  font-weight: 650;
  font-size: .90rem;
  line-height: 1.38;
}
#pm-it .it-divider{
  margin: 10px 0;
  height: 1px;
  background: rgba(255,255,255,.14);
}

/* =========================
   5.1) KPI META — 4 pill in riga
   ========================= */
#pm-it .it-meta{
  display:grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 8px;
  margin-top: 8px;
}
#pm-it .it-pill{
  padding: 9px 9px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color: #fff;
  font-weight: 950;
  font-size: .90rem;
  line-height: 1.05;
  text-align: left;
  min-height: 46px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}
#pm-it .it-pill span{
  display:block;
  margin-top: 4px;
  color: rgba(255,255,255,.72);
  font-weight: 650;
  font-size: .78rem;
  line-height: 1.15;
}

/* =========================
   5.2) ACTIONS
   ========================= */
#pm-it .it-actions{
  margin-top: 10px;
  display:flex;
  gap: 10px;
}
#pm-it .pm-it-btn{
  flex:1;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.06);
  color: #fff;
  font-weight: 950;
  font-size: .92rem;
  letter-spacing: -0.01em;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 9px;
  transition: transform .12s ease, filter .12s ease, background .12s ease;
}
#pm-it .pm-it-btn:active{ transform: translateY(1px); }
#pm-it .pm-it-btn:disabled{ opacity:.55; cursor:not-allowed; }

#pm-it .pm-it-main{
  background: linear-gradient(90deg, var(--pm-accent), var(--pm-accent2));
  border-color: transparent;
  color:#fff;
}
@media (hover:hover){
  #pm-it .pm-it-main:hover{ filter: brightness(1.05); }
}

/* =====================================================
   6) DETAILS — PRO PANEL (diverso dalla card)
   - più chiaro + cornice acqua + header notch
   - roadmap tappe + callout icone
   ===================================================== */
#pm-it .it-details{
  display:none;
  padding: 12px;
  border-top: 1px solid rgba(255,255,255,.12);
  background:
    radial-gradient(circle at 18% 0%, rgba(57,198,210,.16), transparent 55%),
    radial-gradient(circle at 92% 12%, rgba(15,163,177,.12), transparent 60%),
    rgba(0,0,0,.16);
  position: relative;
}
#pm-it .it-details::before{
  content:"";
  position:absolute;
  inset: 0;
  border-top: 1px solid rgba(15,163,177,.35);
  box-shadow:
    inset 0 0 0 1px rgba(57,198,210,.14),
    inset 0 10px 30px rgba(4,27,46,.18);
  pointer-events:none;
}
#pm-it .it-details::after{
  content:"";
  position:absolute;
  top: 0;
  left: 12px;
  width: 54px;
  height: 3px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--pm-accent), var(--pm-accent2));
  opacity: .85;
  pointer-events:none;
}
#pm-it .it-card.is-open .it-details{ display:block; }

/* =========================
   6.1) BLOCK TITLES — più pro
   ========================= */
#pm-it .it-blockTitle{
  display:flex;
  align-items:baseline;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 0 8px;
  border-top: 1px solid rgba(255,255,255,.14);
}
#pm-it .it-blockTitle:first-child{ border-top: none; padding-top: 0; }

#pm-it .it-blockTitle b{
  font-weight: 950;
  font-size: .98rem;
  letter-spacing: -0.01em;
  color: #fff;
  display:inline-flex;
  align-items:center;
  gap: 10px;
}
#pm-it .it-blockTitle b i{
  width: 20px; height: 20px;
  display:inline-grid;
  place-items:center;
  border-radius: 6px;
  background: rgba(15,163,177,.16);
  border: 1px solid rgba(15,163,177,.26);
  color: var(--pm-accent2);
}
#pm-it .it-blockTitle small{
  color: rgba(255,255,255,.70);
  font-weight: 650;
  font-size: .84rem;
}

/* =========================
   6.2) BOX (panel pulito)
   ========================= */
#pm-it .it-box{
  border: 1px solid rgba(255,255,255,.14);
  border-radius: 10px;
  overflow:hidden;
  background: rgba(255,255,255,.05);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
}

/* =====================================================
   ROADMAP — TAPPE (timeline pro)
   ===================================================== */
#pm-it .it-timeline{
  list-style:none;
  margin:0;
  padding: 10px 10px 10px 44px;
  position: relative;
}
#pm-it .it-timeline::before{
  content:"";
  position:absolute;
  left: 22px;
  top: 14px;
  bottom: 14px;
  width: 2px;
  background: linear-gradient(180deg, rgba(15,163,177,.55), rgba(57,198,210,.20));
  border-radius: 999px;
  opacity: .9;
}
#pm-it .it-timeline li{
  padding: 10px 10px 10px 0;
  border-top: 1px solid rgba(255,255,255,.12);
  position: relative;
}
#pm-it .it-timeline li:first-child{ border-top:none; }

/* nodo tappa (icona default) */
#pm-it .it-timeline li::before{
  content:"\f3c5"; /* fa-location-dot */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  position:absolute;
  left: -34px;
  top: 12px;
  width: 28px; height: 28px;
  display:grid;
  place-items:center;
  border-radius: 10px;
  background: rgba(15,163,177,.16);
  border: 1px solid rgba(15,163,177,.28);
  color: var(--pm-accent2);
  box-shadow: 0 8px 16px rgba(4,27,46,.12);
}

/* badge orario con icona */
#pm-it .it-time{
  display:inline-flex;
  align-items:center;
  gap: 8px;
  padding: 6px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight: 950;
  font-size: .80rem;
  white-space:nowrap;
}
#pm-it .it-time::before{
  content:"\f017"; /* fa-clock */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  color: var(--pm-accent2);
  opacity: .95;
}
#pm-it .it-place{
  font-weight: 900;
  color: rgba(255,255,255,.92);
  font-size: .92rem;
}
#pm-it .it-line{
  margin-top: 6px;
  color: rgba(255,255,255,.74);
  font-weight: 650;
  font-size: .88rem;
  line-height: 1.32;
  text-align: end;
}

/* =====================================================
   CALLOUT ROWS — VENTO/RISCHI con icone (no emoji)
   ===================================================== */
#pm-it .it-row{
  padding: 10px 11px;
  display:flex;
  justify-content:space-between;
  gap: 12px;
  border-top: 1px solid rgba(255,255,255,.12);
  color: rgba(255,255,255,.78);
  font-weight: 700;
  font-size: .88rem;
  align-items:flex-start;
}
#pm-it .it-row:first-child{ border-top:none; }

#pm-it .it-row b{
  flex: 0 0 120px;
  color:#fff;
  font-weight: 950;
  display:inline-flex;
  align-items:center;
  gap: 8px;
}

/* icona default per label a sinistra */
#pm-it .it-row b::before{
  content:"\f05a"; /* fa-circle-info */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  width: 20px; height: 20px;
  display:inline-grid;
  place-items:center;
  border-radius: 6px;
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.14);
  color: rgba(255,255,255,.80);
}

#pm-it .it-row .it-note{
  color: rgba(255,255,255,.74);
  font-weight: 650;
  text-align: left;
  flex: 1;
}

/* --- VENTO: OK / EVITA / CONSIGLIO (riga 1/2/3) --- */
#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(1){
  background: rgba(30,169,124,.10);
}
#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(1) b::before{
  content:"\f058"; /* fa-circle-check */
  background: rgba(30,169,124,.16);
  border-color: rgba(30,169,124,.30);
  color: rgba(255,255,255,.92);
}

#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(2){
  background: rgba(255,92,92,.10);
}
#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(2) b::before{
  content:"\f06a"; /* fa-triangle-exclamation */
  background: rgba(255,92,92,.16);
  border-color: rgba(255,92,92,.30);
  color: rgba(255,255,255,.92);
}

#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(3){
  background: rgba(242,184,75,.10);
}
#pm-it .it-blockTitle:has(i.fa-wind) + .it-box .it-row:nth-child(3) b::before{
  content:"\f0eb"; /* fa-lightbulb */
  background: rgba(242,184,75,.16);
  border-color: rgba(242,184,75,.30);
  color: rgba(255,255,255,.92);
}

/* --- RISCHI: stile alert + dashed separators --- */
#pm-it .it-blockTitle:has(i.fa-triangle-exclamation) + .it-box{
  background: rgba(255,92,92,.06);
  border-color: rgba(255,92,92,.18);
}
#pm-it .it-blockTitle:has(i.fa-triangle-exclamation) + .it-box .it-row{
  border-top: 1px dashed rgba(255,255,255,.14);
}
#pm-it .it-blockTitle:has(i.fa-triangle-exclamation) + .it-box .it-row b{
  flex: 0 0 32px;
  justify-content:center;
}
#pm-it .it-blockTitle:has(i.fa-triangle-exclamation) + .it-box .it-row b::before{
  content:"\f071"; /* fa-triangle-exclamation */
  background: rgba(255,92,92,.16);
  border-color: rgba(255,92,92,.28);
  color: rgba(255,255,255,.92);
}

/* =========================
   SPOT CHIPS — compatte
   ========================= */
#pm-it .it-chips{
  margin-top: 8px;
  display:flex;
  flex-wrap:wrap;
  gap: 7px;
}
#pm-it .it-chip{
  display:inline-flex;
  align-items:center;
  gap: 7px;
  padding: 6px 9px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.82);
  font-weight: 800;
  font-size: .78rem;
}
#pm-it .it-chip i{ color: var(--pm-accent2); }

/* =========================
   7) FOOT NOTE — tight
   ========================= */
#pm-it .pm-it-foot{
  padding: 10px var(--pm-pad);
  border-top: 1px solid rgba(255,255,255,.14);
}
#pm-it .pm-it-footNote{
  color: rgba(255,255,255,.74);
  font-weight: 650;
  font-size: .88rem;
  line-height: 1.4;
}

/* =========================
   8) RESPONSIVE
   ========================= */
@media (max-width: 980px){
  #pm-it .pm-it-toolbar{ grid-template-columns: 1fr 1fr; }
  #pm-it .pm-it-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
  #pm-it .it-meta{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}
@media (max-width: 640px){
  #pm-it .pm-it-grid{ grid-template-columns: 1fr; }
  #pm-it .it-meta{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}